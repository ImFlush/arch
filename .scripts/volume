#!/bin/bash

VOL=$(amixer get Master | grep -E -o '[0-9]{0,3}%' | grep -E -o '[0-9]{0,3}' | sort -u)
mute=$(amixer get Master | grep -E -o '(\[on\]|\[off\])' | sort -u)

if [ $mute = "[off]" ]
then
		status="󰝟"
elif [ "$VOL" -lt 31 ]
then
		status="󰕿"
elif [ "$VOL" -lt 66 ]
then
		status="󰖀"
else
		status="󰕾"
fi

echo "$status $VOL %"


# bar for dunst
# filled circle
for (( i=0; i<$VOL; i=$i+10 ))
do
	if [ $mute = "[off]" ]
	then
		bar+=$"󰰱"
	else
		if [ $(( $i + 5 )) == $VOL ]
		then
			bar+=$"󱎖"
		else
			bar+=$"󰄯"
		fi
	fi
done

# empty circle
for (( i=$VOL; i<=90; i=$i+10 ))
do
	if [ $mute = "[off]" ]
	then
		bar+=$"󰰲"
	else
		bar+=$"󰄰"
	fi
done

echo "$bar"
